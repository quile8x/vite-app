var $=Object.defineProperty;var b=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var y=(a,s,n)=>s in a?$(a,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[s]=n,S=(a,s)=>{for(var n in s||(s={}))E.call(s,n)&&y(a,n,s[n]);if(b)for(var n of b(s))G.call(s,n)&&y(a,n,s[n]);return a};import{r as i,a as O}from"./vendor.4e524bb7.js";import{X as k,W as q}from"./App.9e2d2e3f.js";import{j as r,F as z,a as e}from"./main.a508a078.js";import{c as F,ae as H,M as U,L as w,C as P,b as X,d as Y,e as m}from"./Global.f8efdb66.js";import{b as K}from"./chunk-MTWSNRX5.13be4509.js";import{c as J}from"./react-confirm-alert.95306e83.js";import{c as Q}from"./contract-address.13c27df0.js";import{C as V}from"./CM.f0743de6.js";import"./index.a60be5ed.js";(function(){try{var a=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},s=new Error().stack;s&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[s]="22a401ae-8f0f-479b-efa2-58ce5cd7bdd9",a._sentryDebugIdIdentifier="sentry-dbid-22a401ae-8f0f-479b-efa2-58ce5cd7bdd9")}catch{}})();const Z="2GajDLTC6y04qsYsoDRq9nGmWwK",ee="48c62c6b3f82d2ecfa2cbe4c90f97037",te=`${Z}:${ee}`,se=F({host:"ipfs.infura.io",port:5001,protocol:"https",headers:{authorization:`Basic ${K.Buffer.from(te).toString("base64")}`}}),be=a=>{const s=k(),n=[],[d,x]=i.exports.useState(void 0),[ne,v]=i.exports.useState(void 0),[ae,C]=i.exports.useState(void 0);i.exports.useState(!1),i.exports.useState(!1);const[h,I]=i.exports.useState(!1),f="https://stg-claimgiftapi.openlivenft.io";H();const j={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",border:null}},[L,p]=O.useState(!1);function A(){}function W(){p(!1)}const B=async()=>{const[t]=await window.ethereum.request({method:"eth_requestAccounts"});if(!t)return;const o=new q(window.ethereum);if(o.getSigner(),v(t),!await M(t)){J({customUI:({onClose:u})=>r("div",{className:"custom-ui",children:[e("h1",{children:"Only Brand for this page!"}),e("button",{style:{border:"2px solid gray"},onClick:()=>{u(),window.location.replace("/")},children:"Redirect to Home page"})]})});return}const l=new Y(Q.CM,V.abi,o.getSigner(0));x(l)},N=async()=>{if(!d)return;let t=await d.balanceOf(s.account);if(!t)return;const o=t.toNumber();C(o)};i.exports.useEffect(()=>{B()},[]),i.exports.useEffect(()=>{d&&N()},[d]);const[R,D]=i.exports.useState([]),[T,re]=i.exports.useState(!1),M=async t=>!!(await m.get(`${f}/brand/byWalleteAddress/${t}`)).data,_=async()=>{m.get(`${f}/gift`).then(t=>{t.data.forEach((c,l)=>{console.log("transaction====================",c),n.push(S({},c))}),D(n)}).catch(t=>console.log(t))};return i.exports.useEffect(()=>{T||_()},[h]),r(z,{children:[e(U,{isOpen:L,onAfterOpen:A,onRequestClose:W,style:j,contentLabel:"Example Modal",children:e("div",{className:"loader-container",children:e("div",{className:"spinner"})})}),e("div",{style:{width:720,margin:"auto",marginTop:32,float:"left",marginLeft:50},children:e("h1",{style:{float:"left",fontWeight:"bold",fontSize:30},children:"List of Gift"})}),r("div",{style:{width:720,margin:"auto",marginTop:32,paddingBottom:32,float:"left",marginLeft:50},className:"ant-list ant-list-split ant-list-bordered",children:[e("br",{}),e("h1",{style:{float:"left",fontWeight:"bold",fontSize:20,margin:8},children:"Create Gift"}),e("br",{}),e("br",{}),r("form",{onSubmit:async t=>{t.preventDefault();const o=t.target.elements.file.files[0],l=`https://infura-ipfs.io/ipfs/${(await se.add(o)).path}`,u={title:t.target.elements.title.value,des:t.target.elements.description.value,urlImage:l,isClaim:!1};p(!0),await m.post(`${f}/gift`,u).then(function(g){p(!1),I(!h)}).catch(function(g){console.log(g)})},children:[r("div",{style:{margin:8},children:[e("span",{style:{margin:8,float:"left"},children:" Title: "}),e("input",{name:"title",type:"text",className:"ant-input ant-input-lg"})]}),r("div",{style:{margin:8},children:[e("span",{style:{margin:8,float:"left"},children:" Description: "}),e("input",{name:"description",type:"text",className:"ant-input ant-input-lg"})]}),e("div",{style:{margin:8}}),r("div",{style:{margin:8},children:[e("span",{style:{margin:8,float:"left"},children:" File:  "}),e("input",{name:"file",type:"file",className:"ant-input ant-input-lg"})]}),e("br",{}),e("div",{children:e("span",{style:{marginRight:50,float:"right",width:100},children:e("button",{type:"submit",className:"ant-input ant-input-lg",children:" Create"})})})]})]}),r("div",{style:{width:720,margin:"auto",marginTop:32,paddingBottom:32,float:"left",marginLeft:50},children:[e("h1",{style:{float:"left",fontWeight:"bold",fontSize:20,margin:8},children:"List Gift NFTs"}),e("br",{}),e("br",{}),e("br",{}),e(w,{bordered:!0,dataSource:R,renderItem:(t,o)=>{const c=t.urlImage;var l=o+1;return e(w.Item,{children:r(P,{style:{width:720},title:r("div",{style:{float:"left",margin:8},children:[r("span",{style:{fontWeight:"bold"},children:["#",l]})," ",t.title]}),children:[e("div",{children:e("img",{src:c,style:{maxWidth:100}})}),e("br",{}),r("div",{style:{float:"left",margin:8},children:[" ",e("span",{style:{fontWeight:"bold"},children:"Des: "}),t.des]}),e("br",{}),e("br",{}),e("br",{}),e("br",{}),e(X,{to:"/gift-detail/"+t._id,children:"Redirect To Detail"})]})},l+"_")}})]})]})};export{be as Gift};
