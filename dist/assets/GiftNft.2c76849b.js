var M=Object.defineProperty;var S=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var w=(a,n,o)=>n in a?M(a,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[n]=o,v=(a,n)=>{for(var o in n||(n={}))Y.call(n,o)&&w(a,o,n[o]);if(S)for(var o of S(n))$.call(n,o)&&w(a,o,n[o]);return a};import{r as s,a as O}from"./vendor.4e524bb7.js";import{c as P,a0 as q,L as I,C as z,d as H,e as N}from"./Global.f8efdb66.js";import{X as J,W as X}from"./App.9e2d2e3f.js";import{j as l,F as K,a as t}from"./main.a508a078.js";import{b as Q}from"./chunk-MTWSNRX5.13be4509.js";import{c as V}from"./contract-address.13c27df0.js";import{C as Z}from"./CM.f0743de6.js";import"./index.a60be5ed.js";(function(){try{var a=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},n=new Error().stack;n&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[n]="4b53d4fb-e048-4487-bd6d-c5a06138fcc5",a._sentryDebugIdIdentifier="sentry-dbid-4b53d4fb-e048-4487-bd6d-c5a06138fcc5")}catch{}})();const tt="2GajDLTC6y04qsYsoDRq9nGmWwK",et="48c62c6b3f82d2ecfa2cbe4c90f97037",ot=`${tt}:${et}`,st="YourCollectible_2",y=P({host:"ipfs.infura.io",port:5001,protocol:"https",headers:{authorization:`Basic ${Q.Buffer.from(ot).toString("base64")}`}}),nt=async a=>{const n=new TextDecoder;let o="";for await(const m of y.cat(a))o+=n.decode(m);return o},St=a=>{const n="https://stg-claimgiftapi.openlivenft.io",o=J();q();const m=[],[d,C]=s.exports.useState(void 0),[at,k]=s.exports.useState(void 0),[T,j]=s.exports.useState(void 0);s.exports.useState(void 0);const[rt,E]=s.exports.useState(void 0),[it,F]=s.exports.useState(void 0);s.exports.useState(""),s.exports.useState(""),s.exports.useState(""),s.exports.useState("");const A=async()=>{F(void 0),E(void 0);const[e]=await window.ethereum.request({method:"eth_requestAccounts"});k(e);const i=new X(window.ethereum),c=new H(V.CM,Z.abi,i.getSigner(0));C(c)},D=async()=>{if(!d)return;let e=await d.balanceOf(o.account);if(!e)return;const i=e.toNumber();j(i)};s.exports.useEffect(()=>{A()},[]),s.exports.useEffect(()=>{d&&D()},[d]);const W=async()=>{N.get(`${n}02/gift-nft/false`).then(e=>{e.data.forEach((c,p)=>{c.contractName&&c.tokenID&&_(c.contractName,c.tokenID)})}).catch(e=>console.log(e))},_=async(e,i)=>{if(!d)return;let c=d;try{const p=i-1,u=await c.tokenByIndex(p);console.log("tokenId",u);const g=await c.tokenURI(u);console.log("tokenURI",g);const r=g.replace("https://ipfs.io/ipfs/","");console.log("ipfsHash",r);const b=await nt(r);try{const f=JSON.parse(b);console.log("ipfsObject",f),m.push(v({id:u,uri:g,owner:o.account},f))}catch(f){console.log(f)}}catch(p){console.log(p)}U(m)},{mainnetProvider:ct,blockExplorer:lt,tx:R}=a,h=d,B=d,[L,U]=s.exports.useState([]);return s.exports.useState(!1),s.exports.useState({}),s.exports.useState(!1),s.exports.useState(0),s.exports.useState(!0),s.exports.useEffect(()=>{W()},[o.account,T]),O.useState([]),l(K,{children:[t("div",{style:{width:720,margin:"auto",marginTop:32,float:"left",marginLeft:50},children:t("h1",{style:{float:"left",fontWeight:"bold",fontSize:30},children:"Gift NFT"})}),l("div",{style:{width:720,margin:"auto",marginTop:32,paddingBottom:32,float:"left",marginLeft:50},className:"ant-list ant-list-split ant-list-bordered",children:[t("br",{}),t("h1",{style:{float:"left",fontWeight:"bold",fontSize:20,margin:8},children:"Mint NTF"}),t("br",{}),t("br",{}),l("form",{onSubmit:async e=>{e.preventDefault();const i=e.target.elements.file.files[0];console.log(i);const p=`https://infura-ipfs.io/ipfs/${(await y.add(i)).path}`,u={description:e.target.elements.description.value,external_url:"https://austingriffith.com/portfolio/paintings/",image:p,name:e.target.elements.title.value,contract:{address:h.address},attributes:[{trait_type:"BackgroundColor",value:"blue"},{trait_type:"Eyes",value:"googly"},{trait_type:"Stamina",value:15}]};console.log("image",u);const g=await y.add(JSON.stringify(u));await R(B.mintItem(o.account,g.path),r=>{h.provider.getTransactionReceipt(r.hash).then(function(b){let f=b.logs;if(f[0].topics[3]){let x=parseInt(f[0].topics[3],16);console.log("tokenIndex===============",x);const G={walletAddress:o.account,contractAddress:h.address,contractName:st,tokenID:x,isClaim:!1};N.post(`${n}/gift-nft`,G)}}),console.log("\u{1F4E1} Transaction Update:",r),r&&(r.status==="confirmed"||r.status===1)&&(console.log(" \u{1F37E} Transaction "+r.hash+" finished!"),console.log(" \u26FD\uFE0F "+r.gasUsed+"/"+(r.gasLimit||r.gas)+" @ "+parseFloat(r.gasPrice)/1e9+" gwei"))})},children:[l("div",{style:{margin:8},children:[t("span",{style:{margin:8,float:"left"},children:" Title: "}),t("input",{name:"title",type:"text",className:"ant-input ant-input-lg"})]}),l("div",{style:{margin:8},children:[t("span",{style:{margin:8,float:"left"},children:" Description: "}),t("input",{name:"description",type:"text",className:"ant-input ant-input-lg"})]}),l("div",{style:{margin:8},children:[t("span",{style:{margin:8,float:"left"},children:" File:  "}),t("input",{name:"file",type:"file",className:"ant-input ant-input-lg"})]}),t("br",{}),t("div",{children:t("span",{style:{marginRight:50,float:"right",width:100},children:t("button",{type:"submit",className:"ant-input ant-input-lg",children:" Mint"})})})]})]}),l("div",{style:{width:720,margin:"auto",marginTop:32,paddingBottom:32,float:"left",marginLeft:50},className:"ant-list ant-list-split ant-list-bordered",children:[t("h1",{style:{float:"left",fontWeight:"bold",fontSize:20,margin:8},children:"List Gift NFTs"}),t("br",{}),t("br",{}),t("br",{}),t(I,{bordered:!0,dataSource:L,renderItem:e=>{const i=e.id.toNumber(),c=e.image;return t(I.Item,{children:l(z,{title:l("div",{style:{float:"left",margin:8},children:[l("span",{style:{fontWeight:"bold"},children:["#",i]})," ",e.name]}),children:[t("div",{children:t("img",{src:c,style:{maxWidth:100}})}),t("br",{}),l("div",{style:{float:"left",margin:8},children:[" ",t("span",{style:{fontWeight:"bold"},children:"Des: "}),e.description]}),t("br",{}),l("div",{style:{float:"left",margin:8,textAlign:"left"},children:[" ",t("span",{style:{fontWeight:"bold"},children:"Contract Adress: "})," ",e.contract.address]})]})},i+"_"+e.uri+"_"+e.owner)}})]})]})};export{St as GiftNft};
