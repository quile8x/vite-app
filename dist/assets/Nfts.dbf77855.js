var ft=Object.defineProperty,ut=Object.defineProperties;var pt=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var mt=Object.prototype.hasOwnProperty,ht=Object.prototype.propertyIsEnumerable;var M=(l,a,r)=>a in l?ft(l,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):l[a]=r,T=(l,a)=>{for(var r in a||(a={}))mt.call(a,r)&&M(l,r,a[r]);if(L)for(var r of L(a))ht.call(a,r)&&M(l,r,a[r]);return l},j=(l,a)=>ut(l,pt(a));import{r as n,a as gt}from"./vendor.4e524bb7.js";import{c as yt,aK as bt,M as xt,L as O,C as wt,A as St,a as vt,B as It,b as Ct,d as kt,e as A}from"./Global.f8efdb66.js";import{X as Nt,W as Tt}from"./App.9e2d2e3f.js";import{j as o,F as At,a as t}from"./main.a508a078.js";import{b as Dt}from"./chunk-MTWSNRX5.13be4509.js";import{P as Rt}from"./reactjs-popup.esm.3948ab6e.js";import{C as Et}from"./CM.f0743de6.js";import"./index.a60be5ed.js";(function(){try{var l=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},a=new Error().stack;a&&(l._sentryDebugIds=l._sentryDebugIds||{},l._sentryDebugIds[a]="3acba3fd-03b6-43ac-dbc0-aa704f17e6b4",l._sentryDebugIdIdentifier="sentry-dbid-3acba3fd-03b6-43ac-dbc0-aa704f17e6b4")}catch{}})();const Ft="2GajDLTC6y04qsYsoDRq9nGmWwK",Bt="48c62c6b3f82d2ecfa2cbe4c90f97037",Wt=`${Ft}:${Bt}`,D=yt({host:"ipfs.infura.io",port:5001,protocol:"https",headers:{authorization:`Basic ${Dt.Buffer.from(Wt).toString("base64")}`}}),Pt=async l=>{const a=new TextDecoder;let r="";for await(const x of D.cat(l))r+=a.decode(x);return r},Qt=l=>{var B,W,P;const{addressContract:a}=bt();let r="YourCollectible_2",x="Contract One";const p=Nt(),w=[],[f,_t]=n.exports.useState(void 0),[S,Lt]=n.exports.useState(void 0);let q=0;const v="https://stg-claimgiftapi.openlivenft.io",[i,G]=n.exports.useState(void 0),[Mt,U]=n.exports.useState(void 0),[$,z]=n.exports.useState(void 0);n.exports.useState(void 0);const[jt,H]=n.exports.useState(void 0),[Ot,Y]=n.exports.useState(void 0);n.exports.useState(""),n.exports.useState(""),n.exports.useState(""),n.exports.useState(""),n.exports.useState(!1),n.exports.useState(!1);const[R,J]=n.exports.useState(!1),[E,K]=n.exports.useState(!1),X={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",border:null}},[Q,F]=gt.useState(!1);function V(){}const Z=async()=>{Y(void 0),H(void 0);const[e]=await window.ethereum.request({method:"eth_requestAccounts"});U(e);const s=new Tt(window.ethereum),m=new kt(a,Et.abi,s.getSigner(0));G(m)},tt=async()=>{if(!i)return;let e=await i.balanceOf(p.account);if(!e)return;const s=e.toNumber();z(s)};n.exports.useEffect(()=>{Z()},[]),n.exports.useEffect(()=>{i&&tt()},[i]);const{mainnetProvider:et,blockExplorer:qt,tx:I}=l,[nt,ot]=n.exports.useState([]);n.exports.useState(!1);const[C,st]=n.exports.useState({}),[at,k]=n.exports.useState(!1),N=()=>k(!1);n.exports.useEffect(()=>{(async()=>{if(!i)return;let s=await i.balanceOf(p.account);if(console.log("balance============",s),!s)return;var m=!0;const u=s.toNumber();console.log("yourBalance============",u);for(let c=0;c<u;c++)try{console.log("Getting token index ========",c);const h=await i.tokenOfOwnerByIndex(p.account,c);console.log("tokenId==============",h);const d=await i.tokenURI(h);console.log("tokenURI============",d);const b=d.replace("https://ipfs.io/ipfs/","");console.log("ipfsHash",b);const y=await Pt(b);try{const g=JSON.parse(y);console.log("ipfsObject",g),w.push(T({id:h,uri:d,owner:p.account},g)),m=!1}catch(g){console.log(g),m=!1}}catch(h){console.log(h)}if(ot(w),w.length>0){let c=await lt();console.log("isClaim==========================",c),console.log("canClaim==========================",E),c!=E&&K(c)}})()},[p.account,$,i,R]);const lt=async e=>(console.log("ethersContext.account====================",p.account),(await A.get(`${v}/gift-request/checkCanClaimGift/${p.account}/${i.address}`)).data),it=async e=>{e.preventDefault(),F(!0),fetch().then(()=>setRequestSent(!1));const s=e.target.elements.file.files[0];console.log(s);const u=`https://infura-ipfs.io/ipfs/${(await D.add(s)).path}`,c={description:e.target.elements.description.value,external_url:"https://austingriffith.com/portfolio/paintings/",image:u,name:e.target.elements.title.value,contract:{address:i.address},attributes:[{trait_type:"BackgroundColor",value:"blue"},{trait_type:"Eyes",value:"googly"},{trait_type:"Stamina",value:15}]};console.log("image",c);const h=await D.add(JSON.stringify(c));console.log("Uploaded Hash:",h),await I(i.mintItem(p.account,h.path),d=>{console.log("mintItem===========",d),i.provider.getTransactionReceipt(d.hash).then(function(b){let y=b.logs;if(console.log("getTransactionReceipt===========",y),y[0].topics[3]){let g=parseInt(y[0].topics[3],16);console.log("tokenIndex===========",g);let dt=g-1;i.tokenByIndex(dt).then(function(_){console.log("tokenID===========",_),rt(_,d.hash,g)})}}),console.log("\u{1F4E1} Transaction Update:",d),d&&(d.status==="confirmed"||d.status===1)&&(console.log(" \u{1F37E} Transaction "+d.hash+" finished!"),console.log(" \u26FD\uFE0F "+d.gasUsed+"/"+(d.gasLimit||d.gas)+" @ "+parseFloat(d.gasPrice)/1e9+" gwei")),F(!1),J(!R)})},rt=async(e,s,m)=>{const u={walletAddress:p.account,contractAddress:i.address,contractName:r,tokenID:e.toNumber(),tokenHash:s,tokenIndex:m,isOwner:!0};console.log("callAPIPostTransationMint========================",u),await A.post(`${v}/wallet-contract`,u)},ct=async e=>{var m,u;e.preventDefault(),console.log("claimedTokenID ======================",q);const s={name:e.target.elements.name.value,phone:e.target.elements.phone.value,contractName:x,contractAddress:i.address,walletAddress:p.account,email:e.target.elements.email.value,giftName:(m=f==null?void 0:f.title)!=null?m:"",giftID:(u=f==null?void 0:f._id)!=null?u:"",tokenID:S};k(!1),await A.post(`${v}/gift-request`,s).then(function(c){console.log("response=======",c),alert("Submit succcessfully!")}).catch(function(c){console.log(c),alert(c)})};return n.exports.useEffect(()=>{S!=null&&k(!0)},[S]),o(At,{children:[o("div",{children:[t(xt,{isOpen:Q,onAfterOpen:V,onRequestClose:N,style:X,contentLabel:"Example Modal",children:t("div",{className:"loader-container",children:t("div",{className:"spinner"})})}),o(Rt,{open:at,closeOnDocumentClick:!0,onClose:N,className:"popup-content",children:[o("div",{className:"modal-1",children:[t("a",{className:"close",onClick:N,style:{float:"right",fontWeight:"bold",fontSize:20},children:"\xD7"}),t("br",{}),o("div",{style:{width:420,margin:"auto",marginTop:10,paddingBottom:10,float:"left",marginLeft:30},className:"ant-list ant-list-split ant-list-bordered",children:[o("h1",{style:{float:"left",fontWeight:"bold",fontSize:15,margin:8},children:["Gift Name: ",(B=f==null?void 0:f.title)!=null?B:""]}),o("h3",{style:{float:"left",margin:8},children:["Contract: ",(W=f==null?void 0:f.contractName)!=null?W:""," - ",(P=f==null?void 0:f.contractAddress)!=null?P:""]}),t("hr",{style:{float:"left",width:420}}),t("h1",{style:{float:"left",fontWeight:"bold",margin:8},children:"Fill info to receive gift"}),t("p",{style:{float:"left",width:720,height:1}}),o("form",{onSubmit:ct,children:[o("div",{style:{margin:8},children:[t("span",{style:{margin:8,float:"left"},children:" Full Name: "}),t("input",{name:"name",type:"text",className:"ant-input ant-input-lg"})]}),o("div",{style:{margin:8},children:[t("span",{style:{margin:8,float:"left"},children:" Phone"}),t("input",{name:"phone",type:"text",className:"ant-input ant-input-lg"})]}),o("div",{style:{margin:8},children:[t("span",{style:{margin:8,float:"left"},children:" Email: "}),t("input",{name:"email",type:"text",className:"ant-input ant-input-lg"})]}),t("div",{children:t("span",{style:{marginRight:50,float:"right",width:100},children:t("button",{type:"submit",class:"ant-input ant-input-lg",children:" Submit"})})})]})]})]}),t("p",{style:{float:"left",width:720,height:20}})]})]}),t("div",{style:{width:720,margin:"auto",marginTop:32,float:"left",marginLeft:50},children:t("h1",{style:{float:"left",fontWeight:"bold",fontSize:30},children:"My Collection"})}),o("div",{style:{width:720,margin:"auto",marginTop:32,paddingBottom:32,float:"left",marginLeft:50},className:"ant-list ant-list-split ant-list-bordered",children:[t("br",{}),t("h1",{style:{float:"left",fontWeight:"bold",fontSize:20,margin:8},children:"Mint NTF"}),t("br",{}),t("br",{}),o("form",{onSubmit:it,children:[o("div",{style:{margin:8},children:[t("span",{style:{margin:8,float:"left"},children:" Title: "}),t("input",{name:"title",type:"text",className:"ant-input ant-input-lg"})]}),o("div",{style:{margin:8},children:[t("span",{style:{margin:8,float:"left"},children:" Description: "}),t("input",{name:"description",type:"text",className:"ant-input ant-input-lg"})]}),o("div",{style:{margin:8},children:[t("span",{style:{margin:8,float:"left"},children:" File:  "}),t("input",{name:"file",type:"file",className:"ant-input ant-input-lg"})]}),t("br",{}),t("div",{children:t("span",{style:{marginRight:50,float:"right",width:100},children:t("button",{type:"submit",class:"ant-input ant-input-lg",children:" Mint"})})})]})]}),o("div",{style:{width:720,margin:"auto",marginTop:32,paddingBottom:32,float:"left",marginLeft:50},className:"ant-list ant-list-split ant-list-bordered",children:[t("h1",{style:{float:"left",fontWeight:"bold",fontSize:20,margin:8},children:"List NFTs"}),t("br",{}),t("br",{}),t("br",{}),t(O,{bordered:!0,dataSource:nt,renderItem:e=>{const s=e.id.toNumber(),m=e.image;return o(O.Item,{children:[o(wt,{title:o("div",{style:{float:"left",margin:8},children:[o("span",{style:{fontWeight:"bold"},children:["#",s]})," ",e.name]}),children:[t("div",{children:t("img",{src:m,style:{maxWidth:100}})}),o("div",{style:{float:"left",margin:8},children:[" ",t("span",{style:{fontWeight:"bold"},children:"Des: "}),e.description]}),o("div",{style:{float:"left",margin:8,textAlign:"left"},children:[" ",t("span",{style:{fontWeight:"bold"},children:"Contract Adress: "})," ",e.contract.address]})]}),o("div",{style:{float:"right",margin:8,textAlign:"left"},children:["Owner:",t(St,{address:e.owner,fontSize:16}),t(vt,{ensProvider:et,placeholder:"Transfer to address",address:C[s],onChange:u=>{st(j(T({},C),{[s]:u}))}}),t("br",{}),t(It,{style:{float:"right"},onClick:()=>{!p.account||!I||I(i.transferFrom(p.account,C[s],s),u=>{console.log("transfer==============",u)})},children:"Transfer"}),t("br",{}),t("br",{}),t(Ct,{to:"/nft-detail/"+a+"/"+s,children:"Redirect To Detail"})]})]},s+"_"+e.uri+"_"+e.owner)}})]})]})};export{Qt as Nfts};
